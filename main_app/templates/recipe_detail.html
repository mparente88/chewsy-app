{% extends 'base.html' %} {% block title %}{{ recipe.title }}{% endblock %} {% block content %}
<div class="recipe-detail">
  <img src="{% if recipe.image %}{{ recipe.image.url }}{% else %}/static/images/placeholder.jpg{% endif %}" alt="{{ recipe.title }}" />
  <h1>{{ recipe.title }}</h1>
  <h2>Tags</h2>
  <ul class="tags">
    {% for tag in recipe.tags.all %}
    <li>{{ tag.name }} ({{ tag.get_category_display }})</li>
    {% empty %}
    <p>No tags assigned to this recipe.</p>
    {% endfor %}
  </ul>
  <p>{{ recipe.description }}</p>
  <p><strong>Prep Time:</strong> {{ recipe.prep_time }} mins</p>
  <p><strong>Cook Time:</strong> {{ recipe.cook_time }} mins</p>
  <p><strong>Servings:</strong> {{ recipe.servings }}</p>

  <h2>Ingredients</h2>
  <ul>
    {% for ingredient in recipe.ingredients.all %}
    <li>
      {{ ingredient.quantity }} {{ ingredient.measurement }} {{ ingredient.name }}
      <a href="{% url 'ingredient_update' ingredient.pk %}" class="btn btn-sm">Edit</a>
      <a href="{% url 'ingredient_delete' ingredient.pk %}" class="btn btn-sm btn-danger">Delete</a>
    </li>
    {% endfor %}
  </ul>
  <a href="{% url 'ingredient_create' recipe.pk %}" class="btn">Add Ingredient</a>

  <h2>Instructions</h2>
  <ol>
    {% for instruction in recipe.instructions.all %}
    <li>
      {{ instruction.description }} {% if instruction.time_minutes %}
      <span> ({{ instruction.time_minutes }} mins)</span>
      {% endif %}
      <a href="{% url 'instruction_update' instruction.pk %}">Edit</a>
      <a href="{% url 'instruction_delete' instruction.pk %}">Delete</a>
    </li>
    {% endfor %}
  </ol>
  <a href="{% url 'instruction_create' recipe.pk %}" class="btn">Add Instruction</a>
  <a href="{% url 'instructions_reorder' recipe.pk %}" class="btn">Reorder Instructions</a>

  <h2>Actions</h2>
  <a href="{% url 'recipe_update' recipe.pk %}" class="btn">Edit Recipe</a>
  <a href="{% url 'recipe_delete' recipe.pk %}" class="btn">Delete Recipe</a>
  <a href="{% url 'recipe_duplicate' recipe.pk %}" class="btn" onclick="return confirm('Are you sure you want to duplicate this recipe?')">Duplicate Recipe</a>
</div>
{% endblock %}
